
package:
  name: uvm

  imports:
  - "../../packages/via/flow.dv"
  - "../../src/hdl_if/dfm/flow.dv"

  tasks:
  - name: src
    uses: std.FileSet
    with:
      type: systemVerilogSource
      include: [top_pkg.sv, top.sv]

  - name: sim-img
    desc: Builds the simulation image
    uses: hdlsim.mti.SimImage
    needs: 
    - hdlsim.mti.SimLibUVM
    - via.UVMPkg
    - pyhdl-if.VIAPkg
    - pyhdl-if.DpiLib
    - src
    with:
      top: [top]
  - name: sim-run
    uses: hdlsim.mti.SimRun
    needs: [sim-img, pyhdl-if.DpiLib]
    with:
      #      args: 
      #- "-valgrind --tool=memcheck"
      plusargs: 
      - UVM_TESTNAME=base_test
      - pyhdl.via.class=entry.Entry
      - pyhdl.python=${{ rootdir }}/../../packages/python/bin/python
      - pyhdl.debug=1


